{"version":3,"file":"useFirebaseAuth.min.js","sources":["../src/useFirebaseAuth.js"],"sourcesContent":["import React, { useState, useEffect, useContext, createContext } from \"react\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\nconst authContext = createContext();\n\nexport const STORAGE_KEY = \"TINLOOF--EMAIL-FOR-SIGN-IN\";\n\nexport function ProvideAuth({ config, children }) {\n  React.useEffect(() => {\n    initializeFirebase(config);\n  }, []);\n\n  const auth = useProvideAuth();\n\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>;\n}\n\nexport default function useFirebaseAuth() {\n  return useContext(authContext);\n}\n\nfunction useProvideAuth() {\n  const [user, setUser] = useState(\"loading\");\n\n  function register(email, password) {\n    return firebase\n      .auth()\n      .createUserWithEmailAndPassword(email, password)\n      .then((response) => setUser(response.user))\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  function login(email, password) {\n    firebase\n      .auth()\n      .signInWithEmailAndPassword(email, password)\n      .then((response) => setUser(response.user))\n      .catch((error) => {\n        console.error(\"Error signing in: \", error);\n      });\n  }\n\n  useEffect(() => {\n    const unsubscribe = firebase.auth().onAuthStateChanged(setUser);\n\n    return () => unsubscribe();\n  }, []);\n\n  return {\n    user,\n    register,\n    login,\n  };\n}\n\nfunction initializeFirebase(config) {\n  if (!firebase.apps.length) {\n    firebase.initializeApp(config);\n  } else {\n    firebase.app();\n  }\n}\n"],"names":["authContext","createContext","STORAGE_KEY","ProvideAuth","config","children","React","useEffect","firebase","apps","length","app","initializeApp","initializeFirebase","auth","useState","user","setUser","register","email","password","createUserWithEmailAndPassword","then","response","error","console","log","login","signInWithEmailAndPassword","unsubscribe","onAuthStateChanged","useProvideAuth","Provider","value","useFirebaseAuth","useContext"],"mappings":"+kCAIA,IAAMA,EAAcC,IAEPC,EAAc,6BAEpB,SAASC,SAAcC,IAAAA,OAAQC,IAAAA,SACpCC,EAAMC,WAAU,YAiDlB,SAA4BH,GACrBI,EAASC,KAAKC,OAGjBF,EAASG,MAFTH,EAASI,cAAcR,GAlDvBS,CAAmBT,KAClB,QAEGU,EASR,mBAC0BC,EAAS,cAA1BC,OAAMC,gBAEJC,EAASC,EAAOC,UAChBZ,EACJM,OACAO,+BAA+BF,EAAOC,GACtCE,MAAK,SAACC,UAAaN,EAAQM,EAASP,gBAC9B,SAACQ,GACNC,QAAQC,IAAIF,eAITG,EAAMR,EAAOC,GACpBZ,EACGM,OACAc,2BAA2BT,EAAOC,GAClCE,MAAK,SAACC,UAAaN,EAAQM,EAASP,gBAC9B,SAACQ,GACNC,QAAQD,MAAM,qBAAsBA,aAI1CjB,GAAU,eACFsB,EAAcrB,EAASM,OAAOgB,mBAAmBb,UAEhD,kBAAMY,OACZ,IAEI,CACLb,KAAAA,EACAE,SAAAA,EACAS,MAAAA,GAzCWI,UAENzB,gBAACN,EAAYgC,UAASC,MAAOnB,GAAOT,GAG9B,SAAS6B,WACfC,EAAWnC"}