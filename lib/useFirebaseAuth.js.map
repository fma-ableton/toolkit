{"version":3,"file":"useFirebaseAuth.js","sources":["../src/useFirebaseAuth.js"],"sourcesContent":["import React, { useState, useEffect, useContext, createContext } from \"react\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\nconst authContext = createContext();\n\nexport const STORAGE_KEY = \"TINLOOF--EMAIL-FOR-SIGN-IN\";\n\nexport function ProvideAuth({ config, children }) {\n  React.useEffect(() => {\n    initializeFirebase(config);\n  }, []);\n\n  const auth = useProvideAuth();\n\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>;\n}\n\nexport default function useFirebaseAuth() {\n  return useContext(authContext);\n}\n\nfunction useProvideAuth() {\n  const [user, setUser] = useState(\"loading\");\n\n  function register(email, password) {\n    return firebase\n      .auth()\n      .createUserWithEmailAndPassword(email, password)\n      .then((response) => setUser(response.user))\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  function login(email, password) {\n    firebase\n      .auth()\n      .signInWithEmailAndPassword(email, password)\n      .then((response) => setUser(response.user))\n      .catch((error) => {\n        console.error(\"Error signing in: \", error);\n      });\n  }\n\n  useEffect(() => {\n    const unsubscribe = firebase.auth().onAuthStateChanged(setUser);\n\n    return () => unsubscribe();\n  }, []);\n\n  return {\n    user,\n    register,\n    login,\n  };\n}\n\nfunction initializeFirebase(config) {\n  if (!firebase.apps.length) {\n    firebase.initializeApp(config);\n  } else {\n    firebase.app();\n  }\n}\n"],"names":["authContext","createContext","STORAGE_KEY","ProvideAuth","config","children","React","useEffect","initializeFirebase","auth","useProvideAuth","useFirebaseAuth","useContext","useState","user","setUser","register","email","password","firebase","createUserWithEmailAndPassword","then","response","error","console","log","login","signInWithEmailAndPassword","unsubscribe","onAuthStateChanged","apps","length","initializeApp","app"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,IAAMA,WAAW,gBAAGC,mBAAa,EAAjC;IAEaC,WAAW,GAAG;AAEpB,SAASC,WAAT,OAA2C;AAAA,MAApBC,MAAoB,QAApBA,MAAoB;AAAA,MAAZC,QAAY,QAAZA,QAAY;AAChDC,EAAAA,yBAAK,CAACC,SAAN,CAAgB,YAAM;AACpBC,IAAAA,kBAAkB,CAACJ,MAAD,CAAlB;AACD,GAFD,EAEG,EAFH;AAIA,MAAMK,IAAI,GAAGC,cAAc,EAA3B;AAEA,sBAAOJ,wCAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEG;AAA7B,KAAoCJ,QAApC,CAAP;AACD;AAEc,SAASM,eAAT,GAA2B;AACxC,SAAOC,gBAAU,CAACZ,WAAD,CAAjB;AACD;;AAED,SAASU,cAAT,GAA0B;AAAA,kBACAG,cAAQ,CAAC,SAAD,CADR;AAAA;AAAA,MACjBC,IADiB;AAAA,MACXC,OADW;;AAGxB,WAASC,QAAT,CAAkBC,KAAlB,EAAyBC,QAAzB,EAAmC;AACjC,WAAOC,4BAAQ,CACZV,IADI,GAEJW,8BAFI,CAE2BH,KAF3B,EAEkCC,QAFlC,EAGJG,IAHI,CAGC,UAACC,QAAD;AAAA,aAAcP,OAAO,CAACO,QAAQ,CAACR,IAAV,CAArB;AAAA,KAHD,WAIE,UAACS,KAAD,EAAW;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,KANI,CAAP;AAOD;;AAED,WAASG,KAAT,CAAeT,KAAf,EAAsBC,QAAtB,EAAgC;AAC9BC,IAAAA,4BAAQ,CACLV,IADH,GAEGkB,0BAFH,CAE8BV,KAF9B,EAEqCC,QAFrC,EAGGG,IAHH,CAGQ,UAACC,QAAD;AAAA,aAAcP,OAAO,CAACO,QAAQ,CAACR,IAAV,CAArB;AAAA,KAHR,WAIS,UAACS,KAAD,EAAW;AAChBC,MAAAA,OAAO,CAACD,KAAR,CAAc,oBAAd,EAAoCA,KAApC;AACD,KANH;AAOD;;AAEDhB,EAAAA,eAAS,CAAC,YAAM;AACd,QAAMqB,WAAW,GAAGT,4BAAQ,CAACV,IAAT,GAAgBoB,kBAAhB,CAAmCd,OAAnC,CAApB;AAEA,WAAO;AAAA,aAAMa,WAAW,EAAjB;AAAA,KAAP;AACD,GAJQ,EAIN,EAJM,CAAT;AAMA,SAAO;AACLd,IAAAA,IAAI,EAAJA,IADK;AAELE,IAAAA,QAAQ,EAARA,QAFK;AAGLU,IAAAA,KAAK,EAALA;AAHK,GAAP;AAKD;;AAED,SAASlB,kBAAT,CAA4BJ,MAA5B,EAAoC;AAClC,MAAI,CAACe,4BAAQ,CAACW,IAAT,CAAcC,MAAnB,EAA2B;AACzBZ,IAAAA,4BAAQ,CAACa,aAAT,CAAuB5B,MAAvB;AACD,GAFD,MAEO;AACLe,IAAAA,4BAAQ,CAACc,GAAT;AACD;AACF;;;;;;"}